[package]
name = "proxmox-api"
version = "0.1.0"
edition = "2021"

[features]
default = [ "access", "cluster", "nodes", "pools", "storage", "version" ]
access = []
cluster = []
nodes = []
pools = []
storage = []
version = []
reqwest = [ "dep:reqwest" ]
cli = [ "dep:clap", "dep:pretty_env_logger", "reqwest", "dep:parking_lot", "dep:log", "dep:serde_urlencoded" ]

[[bin]]
name = "proxmox-api"
path = "./src/cli/main.rs"
required-features = [ "cli" ]

[package.metadata.proxmox]
debian-distro = "bookworm"
pve-version = "8.0.1"

[dependencies]
serde = { version = "1.0.197", features = ["derive"] }

# TODO: add a generic catch-all type to the client trait. This way we can
# make serde_json optional, too!
serde_json = "1.0.114"

# CLI deps
serde_urlencoded = { optional = true, version = "0.7.1" }
log = { optional = true, version = "0.4.21" }
parking_lot = { optional = true, version = "0.12.1" }
reqwest = { optional = true, version = "0.12.1", features = ["blocking", "json"] }
clap = { optional = true, version = "4.5.3", features = ["derive", "env"] }
pretty_env_logger = { optional = true, version = "0.5.0" }
